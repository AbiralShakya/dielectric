{
  "name": "iPhone Speaker System with Siri",
  "description": "Multi-state hierarchical PCB modeling iPhone speaker system, audio processing, and Siri voice recognition",
  "board": {
    "width": 120,
    "height": 80,
    "clearance": 0.3
  },
  "modules": [
    {
      "name": "Audio Processing Unit",
      "components": ["AUDIO_DSP", "CODEC", "AMP", "C_AUDIO1", "C_AUDIO2", "R_AUDIO1"]
    },
    {
      "name": "Speaker Driver",
      "components": ["SPK_DRIVER", "L_SPK", "C_SPK1", "C_SPK2", "R_SPK"]
    },
    {
      "name": "Microphone Array",
      "components": ["MIC1", "MIC2", "MIC3", "MIC_PREAMP", "C_MIC1", "C_MIC2"]
    },
    {
      "name": "Siri Processing",
      "components": ["SIRI_IC", "ML_ACCEL", "MEM_SIRI", "C_SIRI1", "C_SIRI2"]
    },
    {
      "name": "Power Management",
      "components": ["PMIC", "L_PWR", "C_PWR1", "C_PWR2", "C_PWR3"]
    }
  ],
  "components": [
    {
      "name": "AUDIO_DSP",
      "package": "BGA",
      "width": 12,
      "height": 12,
      "power": 2.5,
      "x": 30,
      "y": 25,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "AUDIO_IN", "x_offset": -6, "y_offset": 0, "net": "AUDIO_IN"},
        {"name": "AUDIO_OUT", "x_offset": 6, "y_offset": 0, "net": "AUDIO_OUT"},
        {"name": "VCC", "x_offset": 0, "y_offset": -6, "net": "VCC_AUDIO"},
        {"name": "GND", "x_offset": 0, "y_offset": 6, "net": "GND"}
      ]
    },
    {
      "name": "CODEC",
      "package": "QFN-32",
      "width": 5,
      "height": 5,
      "power": 0.8,
      "x": 50,
      "y": 25,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "DAC_OUT", "x_offset": 2.5, "y_offset": 0, "net": "AUDIO_OUT"},
        {"name": "ADC_IN", "x_offset": -2.5, "y_offset": 0, "net": "MIC_SIGNAL"},
        {"name": "VCC", "x_offset": 0, "y_offset": -2.5, "net": "VCC_AUDIO"},
        {"name": "GND", "x_offset": 0, "y_offset": 2.5, "net": "GND"}
      ]
    },
    {
      "name": "AMP",
      "package": "SOIC-8",
      "width": 5,
      "height": 4,
      "power": 1.2,
      "x": 70,
      "y": 25,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "IN", "x_offset": -2.5, "y_offset": 0, "net": "AUDIO_OUT"},
        {"name": "OUT", "x_offset": 2.5, "y_offset": 0, "net": "SPK_SIGNAL"},
        {"name": "VCC", "x_offset": 0, "y_offset": -2, "net": "VCC_AUDIO"},
        {"name": "GND", "x_offset": 0, "y_offset": 2, "net": "GND"}
      ]
    },
    {
      "name": "SPK_DRIVER",
      "package": "QFN-16",
      "width": 4,
      "height": 4,
      "power": 3.0,
      "x": 90,
      "y": 25,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "IN", "x_offset": -2, "y_offset": 0, "net": "SPK_SIGNAL"},
        {"name": "OUT_P", "x_offset": 2, "y_offset": -1, "net": "SPK_P"},
        {"name": "OUT_N", "x_offset": 2, "y_offset": 1, "net": "SPK_N"},
        {"name": "VCC", "x_offset": 0, "y_offset": -2, "net": "VCC_SPK"},
        {"name": "GND", "x_offset": 0, "y_offset": 2, "net": "GND"}
      ]
    },
    {
      "name": "L_SPK",
      "package": "INDUCTOR-8MM",
      "width": 8,
      "height": 8,
      "power": 0.0,
      "x": 105,
      "y": 25,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -4, "y_offset": 0, "net": "SPK_P"},
        {"name": "pin2", "x_offset": 4, "y_offset": 0, "net": "SPK_N"}
      ]
    },
    {
      "name": "C_SPK1",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 95,
      "y": 15,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "SPK_P"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_SPK2",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 95,
      "y": 35,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "SPK_N"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "R_SPK",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 100,
      "y": 20,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "SPK_P"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "SPK_N"}
      ]
    },
    {
      "name": "MIC1",
      "package": "MIC-3MM",
      "width": 3,
      "height": 3,
      "power": 0.05,
      "x": 20,
      "y": 50,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "OUT", "x_offset": 0, "y_offset": 1.5, "net": "MIC1_SIG"},
        {"name": "VCC", "x_offset": -1.5, "y_offset": 0, "net": "VCC_MIC"},
        {"name": "GND", "x_offset": 1.5, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "MIC2",
      "package": "MIC-3MM",
      "width": 3,
      "height": 3,
      "power": 0.05,
      "x": 30,
      "y": 50,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "OUT", "x_offset": 0, "y_offset": 1.5, "net": "MIC2_SIG"},
        {"name": "VCC", "x_offset": -1.5, "y_offset": 0, "net": "VCC_MIC"},
        {"name": "GND", "x_offset": 1.5, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "MIC3",
      "package": "MIC-3MM",
      "width": 3,
      "height": 3,
      "power": 0.05,
      "x": 40,
      "y": 50,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "OUT", "x_offset": 0, "y_offset": 1.5, "net": "MIC3_SIG"},
        {"name": "VCC", "x_offset": -1.5, "y_offset": 0, "net": "VCC_MIC"},
        {"name": "GND", "x_offset": 1.5, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "MIC_PREAMP",
      "package": "SOIC-8",
      "width": 5,
      "height": 4,
      "power": 0.3,
      "x": 50,
      "y": 50,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "IN1", "x_offset": -2.5, "y_offset": -1, "net": "MIC1_SIG"},
        {"name": "IN2", "x_offset": -2.5, "y_offset": 0, "net": "MIC2_SIG"},
        {"name": "IN3", "x_offset": -2.5, "y_offset": 1, "net": "MIC3_SIG"},
        {"name": "OUT", "x_offset": 2.5, "y_offset": 0, "net": "MIC_SIGNAL"},
        {"name": "VCC", "x_offset": 0, "y_offset": -2, "net": "VCC_MIC"},
        {"name": "GND", "x_offset": 0, "y_offset": 2, "net": "GND"}
      ]
    },
    {
      "name": "SIRI_IC",
      "package": "BGA",
      "width": 10,
      "height": 10,
      "power": 1.8,
      "x": 80,
      "y": 50,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "AUDIO_IN", "x_offset": -5, "y_offset": 0, "net": "MIC_SIGNAL"},
        {"name": "ML_OUT", "x_offset": 5, "y_offset": 0, "net": "SIRI_CMD"},
        {"name": "VCC", "x_offset": 0, "y_offset": -5, "net": "VCC_SIRI"},
        {"name": "GND", "x_offset": 0, "y_offset": 5, "net": "GND"}
      ]
    },
    {
      "name": "ML_ACCEL",
      "package": "QFN-16",
      "width": 4,
      "height": 4,
      "power": 0.5,
      "x": 95,
      "y": 50,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "IN", "x_offset": -2, "y_offset": 0, "net": "SIRI_CMD"},
        {"name": "OUT", "x_offset": 2, "y_offset": 0, "net": "ML_OUT"},
        {"name": "VCC", "x_offset": 0, "y_offset": -2, "net": "VCC_SIRI"},
        {"name": "GND", "x_offset": 0, "y_offset": 2, "net": "GND"}
      ]
    },
    {
      "name": "MEM_SIRI",
      "package": "BGA",
      "width": 8,
      "height": 8,
      "power": 0.4,
      "x": 105,
      "y": 50,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "DATA", "x_offset": 0, "y_offset": -4, "net": "ML_OUT"},
        {"name": "VCC", "x_offset": -4, "y_offset": 0, "net": "VCC_SIRI"},
        {"name": "GND", "x_offset": 4, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "PMIC",
      "package": "QFN-32",
      "width": 5,
      "height": 5,
      "power": 0.6,
      "x": 30,
      "y": 65,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "VIN", "x_offset": -2.5, "y_offset": 0, "net": "VBAT"},
        {"name": "VOUT1", "x_offset": 2.5, "y_offset": -1, "net": "VCC_AUDIO"},
        {"name": "VOUT2", "x_offset": 2.5, "y_offset": 0, "net": "VCC_SPK"},
        {"name": "VOUT3", "x_offset": 2.5, "y_offset": 1, "net": "VCC_SIRI"},
        {"name": "VOUT4", "x_offset": 0, "y_offset": 2.5, "net": "VCC_MIC"},
        {"name": "GND", "x_offset": 0, "y_offset": -2.5, "net": "GND"}
      ]
    },
    {
      "name": "L_PWR",
      "package": "INDUCTOR-6MM",
      "width": 6,
      "height": 6,
      "power": 0.0,
      "x": 45,
      "y": 65,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -3, "y_offset": 0, "net": "VBAT"},
        {"name": "pin2", "x_offset": 3, "y_offset": 0, "net": "VCC_AUDIO"}
      ]
    },
    {
      "name": "C_AUDIO1",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 35,
      "y": 20,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "VCC_AUDIO"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_AUDIO2",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 45,
      "y": 20,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "VCC_AUDIO"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "R_AUDIO1",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 55,
      "y": 20,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "AUDIO_OUT"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_MIC1",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 25,
      "y": 45,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "MIC1_SIG"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_MIC2",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 35,
      "y": 45,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "MIC2_SIG"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_SIRI1",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 85,
      "y": 45,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "VCC_SIRI"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_SIRI2",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 90,
      "y": 45,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "VCC_SIRI"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_PWR1",
      "package": "CAP-10MM",
      "width": 10,
      "height": 10,
      "power": 0.0,
      "x": 40,
      "y": 70,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -5, "y_offset": 0, "net": "VBAT"},
        {"name": "pin2", "x_offset": 5, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_PWR2",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 50,
      "y": 70,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "VCC_AUDIO"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    },
    {
      "name": "C_PWR3",
      "package": "0805",
      "width": 2,
      "height": 1.25,
      "power": 0.0,
      "x": 55,
      "y": 70,
      "angle": 0,
      "placed": true,
      "pins": [
        {"name": "pin1", "x_offset": -1, "y_offset": 0, "net": "VCC_SPK"},
        {"name": "pin2", "x_offset": 1, "y_offset": 0, "net": "GND"}
      ]
    }
  ],
  "nets": [
    {
      "name": "VBAT",
      "pins": [["PMIC", "VIN"], ["L_PWR", "pin1"], ["C_PWR1", "pin1"]]
    },
    {
      "name": "VCC_AUDIO",
      "pins": [["PMIC", "VOUT1"], ["AUDIO_DSP", "VCC"], ["CODEC", "VCC"], ["AMP", "VCC"], ["L_PWR", "pin2"], ["C_AUDIO1", "pin1"], ["C_AUDIO2", "pin1"], ["C_PWR2", "pin1"]]
    },
    {
      "name": "VCC_SPK",
      "pins": [["PMIC", "VOUT2"], ["SPK_DRIVER", "VCC"], ["C_PWR3", "pin1"]]
    },
    {
      "name": "VCC_SIRI",
      "pins": [["PMIC", "VOUT3"], ["SIRI_IC", "VCC"], ["ML_ACCEL", "VCC"], ["MEM_SIRI", "VCC"], ["C_SIRI1", "pin1"], ["C_SIRI2", "pin1"]]
    },
    {
      "name": "VCC_MIC",
      "pins": [["PMIC", "VOUT4"], ["MIC1", "VCC"], ["MIC2", "VCC"], ["MIC3", "VCC"], ["MIC_PREAMP", "VCC"]]
    },
    {
      "name": "GND",
      "pins": [["AUDIO_DSP", "GND"], ["CODEC", "GND"], ["AMP", "GND"], ["SPK_DRIVER", "GND"], ["MIC1", "GND"], ["MIC2", "GND"], ["MIC3", "GND"], ["MIC_PREAMP", "GND"], ["SIRI_IC", "GND"], ["ML_ACCEL", "GND"], ["MEM_SIRI", "GND"], ["PMIC", "GND"], ["C_SPK1", "pin2"], ["C_SPK2", "pin2"], ["C_AUDIO1", "pin2"], ["C_AUDIO2", "pin2"], ["C_MIC1", "pin2"], ["C_MIC2", "pin2"], ["C_SIRI1", "pin2"], ["C_SIRI2", "pin2"], ["C_PWR1", "pin2"], ["C_PWR2", "pin2"], ["C_PWR3", "pin2"]]
    },
    {
      "name": "AUDIO_IN",
      "pins": [["AUDIO_DSP", "AUDIO_IN"]]
    },
    {
      "name": "AUDIO_OUT",
      "pins": [["AUDIO_DSP", "AUDIO_OUT"], ["CODEC", "DAC_OUT"], ["AMP", "IN"], ["R_AUDIO1", "pin1"]]
    },
    {
      "name": "SPK_SIGNAL",
      "pins": [["AMP", "OUT"], ["SPK_DRIVER", "IN"]]
    },
    {
      "name": "SPK_P",
      "pins": [["SPK_DRIVER", "OUT_P"], ["L_SPK", "pin1"], ["C_SPK1", "pin1"], ["R_SPK", "pin1"]]
    },
    {
      "name": "SPK_N",
      "pins": [["SPK_DRIVER", "OUT_N"], ["L_SPK", "pin2"], ["C_SPK2", "pin1"], ["R_SPK", "pin2"]]
    },
    {
      "name": "MIC1_SIG",
      "pins": [["MIC1", "OUT"], ["MIC_PREAMP", "IN1"], ["C_MIC1", "pin1"]]
    },
    {
      "name": "MIC2_SIG",
      "pins": [["MIC2", "OUT"], ["MIC_PREAMP", "IN2"], ["C_MIC2", "pin1"]]
    },
    {
      "name": "MIC3_SIG",
      "pins": [["MIC3", "OUT"], ["MIC_PREAMP", "IN3"]]
    },
    {
      "name": "MIC_SIGNAL",
      "pins": [["MIC_PREAMP", "OUT"], ["CODEC", "ADC_IN"], ["SIRI_IC", "AUDIO_IN"]]
    },
    {
      "name": "SIRI_CMD",
      "pins": [["SIRI_IC", "ML_OUT"], ["ML_ACCEL", "IN"]]
    },
    {
      "name": "ML_OUT",
      "pins": [["ML_ACCEL", "OUT"], ["MEM_SIRI", "DATA"]]
    }
  ]
}

